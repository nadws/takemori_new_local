create view view_summary_serve as
select `a`.`id_order` AS `id_order`,`a`.`tgl` AS `tgl`,`a`.`no_order` AS `no_order`,`a`.`admin` AS `admin`,`a`.`id_koki1` AS `id_koki1`,`a`.`id_koki2` AS `id_koki2`,`a`.`id_koki3` AS `id_koki3`,`b`.`no_order2` AS `no_order2`,if(`b`.`voucher` = '0','T','Y') AS `vouceher`,sum(`a`.`harga`) AS `hrg`,`b`.`voucher` AS `voucher` from (`resto`.`tb_order` `a` left join (select `b`.`no_order` AS `no_order`,`b`.`no_order2` AS `no_order2`,`c`.`voucher` AS `voucher` from (`resto`.`tb_order2` `b` left join `resto`.`tb_transaksi` `c` on(`c`.`no_order` = `b`.`no_order2`)) group by `b`.`no_order`) `b` on(`b`.`no_order` = `a`.`no_order`)) where `a`.`id_distribusi` <> '2' group by `a`.`no_order`,`a`.`admin` 